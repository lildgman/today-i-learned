# SQLD 정리
## 데이터모델링
### 데이터모델의 이해

- 컬럼: 속성
- 행: 인스턴스
- 테이블: 엔티티

#### 모델링의 개념

- 현실 세계의 `비즈니스 프로세스`와 `데이터 요구 사항`을 `추상적`이고 `구조화`된 형태로 표현하는 과정
- 데이터베이스의 `구조와 관계 정의`, 데이터베이스를 통해 데이터 `저장`, `조작`, `관리` 방법을 명확히 정의

#### 모델링의 특징

1. **단순화(Simplification)**
- 현실을 단순화하여 핵심 요소에 집중하고 `불필요한 세부 사항 제거`
- 단순화를 통해 복잡한 현실 세계를 이해하고 표현하기 쉬워짐

2. **추상화(Abstraction)**
- 현실세계를 일정한 형식에 맞춰 `간략하게` 대략적으로 표현하는 과정
- 다양한 현상을 일정한 양식인 표기업에 따라 표현

3. **명확화(Clarity)**
- 대상에 대한 애매모호함을 최대한 제거하고 `정확하게 현상을 기술`하는 과정
- 명확화를 통해 모델을 이해하는 이들의 의사소통을 원할히 함

#### 데이터 모델링 3가지 관점

1. **데이터 관점**
- `데이터`가 어떻게 `저장`, `접근`, `관리`되는지 정의하는 단계

2. **프로세스 관점**
- `시스템`이 어떤 `작업`을 수행하고, `작업`들이 어떻게 조직되고 조정되는지 정의하는 단계
- 데이터가 시스탬 내에서 `어떻게 흐르고 변환`되는지에 대한 확인

3. **데이터와 프로세스 관점**
- `데이터 관점`과 `프로세스 관점`을 `결합`하여 시스템의 전반적인 동적을 이해하는 단계
- `특정 프로세스가 어떤 데이터`를 사용하는지, 데이터가 어떻게 생성되고 변경되는지 명확하게 정의

#### 데이터 모델링 유의점

1. **중복(Duplication)**
- 한 테이블 또는 여러 테이블에 `같은 정보를 저장하지 않도록` 설계

2. **비유연성(Inflexibility)**
- 사소한 업무 변화에 대해서도 `잦은 모델 변경이 되지 않도록` 주의

3. **비일관성(Inconsistency)**
- 데이터베이스 내 정보가 모순되거나 상반된 내용을 갖는 상태를 의미
- 데이터간 `상호연관 관계`를 명확히 정의
- 데이터의 중복이 없더라고 비일관성은 발생할 수 있음
- 데이터 품질 관리 필요

#### 데이터 모델링 3가지 요소

- `대상(Entity)`: 업무가 관리하고자 하는 `대상`(객체)
- `속성(Attribute)`: 대상들이 갖는 속성(하나의 특징으로 정의될 수 있는 것)
- `관계(Relationship)`: 대상들 간의 관계

#### 데이터 모델링의 3단계

1. **개념적 모델링**
- `업무 중심적`, 포괄적인 수준의 모델링
- `추상화 수준이 가장 높음`
- 업무 분석 후 업무의 `핵심 엔티티를 추출하는 단계`
- 도출한 핵심 엔티티들과의 관계를 표현하기 위해 ERD작성

2. **논리적 모델링**
- 개념적 모델링의 결과를 토대로 `세부속성, 식별자, 관계` 등을 표현하는 단계
- `데이터 구조를 정의`하기 때문에 비슷한 업무나 프로젝트에서 동일한 형태의 데이터 사용시 `재사용 가능`
- 동일한 논리적 모델 사용 시 쿼리도 재사용 가능
- `데이터 정규화 수행`
- 재사용성 높은 논리적 모델은 유지보수가 용이

3. **물리적 모델링**
- 논리 모델링이 끝나면 이를 `직접 물리적으로 생성`하는 과정
- 데이터베이스 성능, 디스크 저장구조, 하드웨어의 보안성, 가용성 등을 고려
- 가장 구체적인 데이터 모델링
- `추상화 수준 가장 낮음`(가장 구체적)

#### 스키마의 3단계 구조
- 스키마: 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터의 집합
- 외부, 개념, 내부 스키마로 분리
- 사용자의 관점과 실제 설계된 물리적인 방식을 분리하기 위해 고안

1. **외부 스키마**
- `사용자가 보는 관점`에서 데이터베이스 스키마를 정의
- `사용자나 응용 프로그램이 필요한 데이터`를 정의(View: 사용자가 접근하는 대상)

2. **개념 스키마**
- 사용자 관점의 데이터베이스 스키마를 통합하여 `데이터베이스의 전체 논리적 구조를 정의`
- 전체 데이터베이스의 `개체, 속성, 관계, 데이터 타입` 등을 정의

3. **내부 스키마**
- 데이터가 `물리적으로 어떻게 저장되는지`를 정의
- 데이터의 `저장 구조, 컬럼, 인덱스` 등을 정의

##### 3단계 스키마의 독립성
- 독립성: 물리적, 논리적 구조를 변경하더라도 사용자가 사용하는 응용 프로그램에 영향을 주지 않는 특성
1. **논리적 독립성**: 논리적 데이터 구조가 변경되어도(개념 스키마 변경) 응용 프로그램에 영향을 주지 않는 특성
2. **물리적 독립성**: 물리적 구조가 변경되어도(내부 스키마 변경) 개념/ 외부 스키마에 영향을 주지 않는 특성

#### 데이터 모델의 표기법(ERD: Entity Relationship Diagram)
- 엔티티와 엔티티 간의 관계를 시작적으로 표현한 다이어그램
- 1976년 피터 첸이 만듦, 데이터 모델링 표준으로 사용

#### ERD 작성 절차
1. 엔티티를 도출한 후 그린다
2. 엔티티 배치
3. 엔티티 간 관계를 설정
4. 관계명 서술
5. 관계의 참여도 기술
6. 관계의 필수 여부 확인

<hr>

### 엔티티의 개념
- 현실 세계에서 `독립적으로 식별 가능한 객체나 사물`
- 업무상 분석해야하는 `대상(인스턴스, 컬럼)들로 이루어진 집합`
- 인스턴스는 엔티티의 속성 값들로 구성, 엔티티의 개념을 현실에서 구체적으로 나타낸 것

ex) <Br>
- 엔티티: 학생
- 속성(Attribute): 학번, 이름, 학과 등
- 식별자(Identifier): 학번(고유한 학번으로 학생을 식별)
- 인스턴스: 특정 학생의 데이터
  - 학번: 19900101
  - 이름: ㅁㅁㅁ
  - 학과: 컴공

#### 엔티티의 특징

1. `유일한 식별자`에 의해 식별 가능
- 인스턴스가 식별자에 의해 한 개씩만 존재하는지 검증이 필요
- 유일한 식별자는 그 엔티티의 인스턴스만의 고유 이름
- ex) 이름은 동명이인이 있을 수 있으므로 사번, 학번 등이 고유식별자

2. 해당 업무에 필요하고 관리하고자 하는 정보
- 설계하는 업무의 시스템 구축에 필요한 정보여야함

3. `인스턴스들의 집합`
- 영속적으로 존재하는 `2개 이상의 인스턴스 집합`
- 인스턴스가 한 개 밖에 없는 엔티티는 집합이 아니므로 성립이 안됨

4. 엔티티는 `반드시 속성를 가짐`
- 각 엔티티는 `2개 이상의 속성`을 가짐
- 하나의 인스턴스는 각각 속성들에 대한 1개의 속성값만을 가짐

5. 엔티티는 업무 프로세스에 의해 이용
- 업무적으로 필요해 선정했음에도 실제로 사용되지 않으면 잘못 설계된 것
- 모델링 시 발견하기 어려운 경우 `데이터 모델 검증`이나 상관 모델링 시 `단위 프로세스 교처점검`으로 문제를 도출
- 누락된 프로세스의 경우 추후 해당 프로세스 추가
- 반대로 사용되지 않은 고립 엔티티는 제거가 필요함

6. 다른 엔티티와 `최소 1개 이상의 관계 성립`
- 엔티티는 업무적 연관성을 갖고 `다른 엔티티와 연관`의 의미를 가짐
- 관계가 없는 엔티티 도출은 부적절한 엔티티이거나 적절한 관계를 찾지 못한것

#### 엔티티의 분류

##### `유형과 무형에 따른 분류`

1. **유형엔티티**
- `물리적 형태가 있음`
- 안정적이며 지속적으로 활용되는 엔티티
- 업무로부터 구분하기가 가장 용이한 엔티티
<br>
ex) 사원, 물품 등 

2. **개념엔티티**
- `물리적인 형태 없음`
- 관리해야 할 개념적 정보로부터 구분되는 엔티티
<br>
ex) 조직, 보험상품 등

3. **사건엔티티**
- `업무를 수행함에 따라 발생하는 엔티티`
- `발생량이 많고` 각종 통계자료에 이용
<br>
ex) 주문, 청구, 미납 등

###### `발생 시점에 따른 분류`

1. **기본엔티티**
- `그 업무에 원래 존재하는 정보`
- 다른 엔티티와 관계에 의해 생성되지 않고 `독립적으로 생성`
- 다른 엔티티의 부모 역할을 하는 엔티티
- 다른 엔티티로부터 주식별자를 상속받지 않고 `자신의 고유한 주식별자를 가짐`
<br>
ex) 사원, 부서, 고객 등

2. **중심엔티티**
- `기본엔티티로부터 발생되고 그 업무에서 중심적인 역할`
- `많은 데이터가 발생`되고 다른 엔티티와의 관계를 통해 많은 행위 엔티티를 생성
<br>
ex) 계약, 사고, 청구 등

3. **행위엔티티**
- `2개 이상의 부모엔티티로부터 발생`
- 자주 내용이 바뀌거나 데이터 양이 증가
- 분석 초기 단계보단 `상세 설계 단계`나 `프로세스와 상관모델링`을 진행하면서 도출 
<br>
ex) 주문(고객과 상품 엔티티로부터 발생하므로 행위엔티티이기도 하다)

#### 엔티티의 명명규칙
- 현업에서 사용하는 용어 사용
- 약자 사용 자제
- 단수 명사 사용
- 모든 엔티티에서 유일하게 이름 부여
- 엔티티 생성의 의미대로 이름 부여

<Hr>

### 속성의 개념
- 업무에서 필요로하는 `고유한 성질, 특징`을 의미 -> `컬럼`으로 표현할 수 있는 단위
- 업무상 인스턴스로 관리하고자 하는 `더 이상 분리되지 않는 최소 데이터 단위`
- 인스턴스의 구성 요소(학생 엔티티에 이름, 학번 등이 속성이 될 수 있음)

#### 엔티티, 인스턴스, 속성, 속성값의 괸계
- 한 개의 엔티티에는 `2개 이상의 인스턴스`의 집합이어야 한다(하나의 테이블은 두 개 이상의 행을 가진다)
- 한 개의 엔티티는 `2개 이상의 속성`을 갖는다. (하나의 테이블은 두 개 이상의 컬럼으로 구성된다.)
- 한 개 속성은 `1개의 속성값`을 갖는다.(각 컬럼의 값은 하나씩만 삽입 가능)
- 속성은 엔티티에 속한 엔티티에 대한 구체적인 정보를 나타낸다.

#### 속성의 특징
- 반드시 해당 업무에서 `필요하고 관리하고자 하는 정보`여야 한다.
- 정해진 `주식별자에 함수적 종속성을 가져야 한다.`
- 하나의 속성은 `한 개의 값만을` 가진다.
- 하나의 속성에 여러 개의 값이 있을 경우 별도의 엔티티를 이용해 분리해야 한다.
- 하나의 인스턴스는 `속성마다 반드시 하나의 속성값`을 가진다.
-> 각 속성이 하나의 값을 갖고있음을 의미(속성의 원자성)
- `원자성`은 데이터모델의 `각 엔티티의 인스턴스`가 해당 `속성`에 대해 `단일하고 명확한 값`을 가지는 것을 의미

#### 함수적 종속성
- 한 속성값이 다른 속성값에 종속적인 관계를 갖는 특징을 말함
- `어떤 속성 A의 값에 의해 다른 속성 B도 유일하게 결정`된다면 B는 A에 함수적으로 종속됐다고 한다. (A->B)

1. **완전 함수적 종속**
- 특정 컬럼이 기본키에 대해 `완전히 종속`될 때를 의미
- PK를 구성하는 컬럼이 2개 이상일 경우, PK 값 모두에 의해 종속관계를 나타낼 때 `완전 함수 종속성`을 만족
<br>
ex) 주문번호 + 제품번호 에 의해 수량 컬럼 값이 결정됨

2. **부분 함수적 종속**
- 기본키 전체가 아닌, `기본키 일부`에 대해 종속될 때를 의미
<br>
ex) 수강기록 테이블에서 `학생번호`와 `과목`이 Pk라고 가정할 때, `과목`에 의해서도 교수가 결정된다면 `부분 함수적 종속 관계`

#### 속성의 분류
##### `속성의 특성에 따른 분류`

1. **기본 속성**
- `업무로부터 추출된 모든 특성`
- 엔티티에 가장 일반적으로 많이 존재하는 속성

2. **설계 속성**
- 기본 속성 외, `업무를 규칙화`하기 위해 새로 만들어지거나 `기본 속성을 변형`하여 만들어지는 속성

3. **파생 속성**
- `다른 속성에 의해 만들어지는 속성`
- 일반적으로 계산된 값들
- 데이터 정합성을 유지하기 위해 적게 정의하는 것이 좋다.

##### `엔티티 구성방식에 따른 분류`

1. **PK(Primary Key, 기본키)**
- 인스턴스를 식별할 수 있는 속성

2. **FK(Foreign Key, 외래키)**
- 다른 엔티티와의 관계에서 포함된 속성

3. **일반 속성**
- 엔티티에 포함되어 있고 PK/FK에 포함되지 않는 속성

##### `분해 여부에 따른 속성`

1. 단일 속성
- 하나의 의미로 구성된 경우

2. 복합 속성
- 여러개의 의미로 구성된 경우

3. 다중값 속성
- 속성에 여러 개의 값을 가질 수 있는 경우
- 다중값 속성은 엔티티로 분해

#### 속성의 명명규칙
- 해당 업무에서 사용하는 이름
- 서술식 속성명 사용하지 않는다.
- 약어 사용은 제한
- 전체 데이터 모델에서 유일한 명칭

#### 도메인
- 각 속성이 가질 수 있는 값의 범위
- 엔티티 내에서 속성에 대한 데이터 타입과 크기, 제약사항을 지정하는 것